{"version":3,"file":"commonHelpers2.js","sources":["../src/js/excercises.js","../src/main.js"],"sourcesContent":["import backendAPI from './backendAPI';\nimport renderAPI from './renderMarkup';\nimport { openModalExercise } from './modal-exercise';\n\nlet isMobileDevice;\nlet isDesktopDevice;\n\nconst filterListElem = document.querySelector('.exercises-type-list');\nconst exerciseListElem = document.querySelector('.exercises-gallery-list');\nconst paginationListElem = document.querySelector('.pagination-list');\nconst searchFormElem = document.querySelector('.exercises-type-form');\nconst inputElement = document.querySelector('.exercises-form-input');\nconst clearButton = document.querySelector('.exercises-form-btn-clear');\nconst exerciseslistItemsEmptyMessage = document.querySelector(\n  '.exercises-empty-message'\n);\nconst exercisesFilter = document.querySelector('.exercises-section-title-span');\n\n// const loader = document.querySelector('.loader');\n// console.log(loader);\n\nexport default function startExercisesScenario() {\n  isMobileDevice = document.documentElement.scrollWidth < 768;\n  isDesktopDevice = document.documentElement.scrollWidth >= 1440;\n\n  filterListElem.addEventListener('click', filterListHandler);\n  exerciseListElem.addEventListener('click', exerciseListHandler);\n  paginationListElem.addEventListener('click', paginationListHandler);\n\n  searchFormElem.addEventListener('submit', searchFormSubmitHandler);\n  inputElement.addEventListener('input', inputElementHandler);\n  clearButton.addEventListener('click', clearButtonHandler);\n\n  window.addEventListener('resize', windowResizeHandler);\n\n  renderGroups();\n}\n\nfunction windowResizeHandler() {\n  let isDeviceChange = false;\n  if (isMobileDevice !== document.documentElement.scrollWidth < 768) {\n    isDeviceChange = true;\n    isMobileDevice = !isMobileDevice;\n  }\n\n  if (isDesktopDevice !== document.documentElement.scrollWidth >= 1440) {\n    isDeviceChange = true;\n    isDesktopDevice = !isDesktopDevice;\n  }\n\n  if (isDeviceChange) {\n    exerciseListElem.dataset.isGroups ? renderGroups() : renderExercises();\n  }\n}\n\nfunction searchFormSubmitHandler(event) {\n  event.preventDefault();\n  renderExercises();\n}\n\nfunction inputElementHandler() {\n  const inputValue = inputElement.value.trim();\n  clearButton.style.display = inputValue.length > 0 ? 'block' : 'none';\n}\n\nfunction clearButtonHandler() {\n  searchFormElem.reset();\n  clearButton.style.display = 'none';\n  renderExercises();\n}\n\nasync function renderGroups(page = 1) {\n  exerciseListElem.classList.add('visually-hidden');\n  paginationListElem.classList.add('visually-hidden');\n  // loader.classList.remove('visually-hidden');\n  exerciseListElem.dataset.isGroups = 'true';\n  exerciseListElem.dataset.groupName = '';\n\n  const queryParams = {\n    filter: getActiveFilterElem().dataset.filter,\n    limit: isMobileDevice ? 8 : 12,\n    page,\n  };\n\n  const filtersData = await backendAPI.getFilterData(queryParams);\n  // loader.classList.add('visually-hidden');\n  exerciseListElem.classList.remove('visually-hidden');\n  paginationListElem.classList.remove('visually-hidden');\n  renderItems(filtersData);\n}\n\nasync function renderExercises(page = 1) {\n  exerciseListElem.classList.add('visually-hidden');\n  paginationListElem.classList.add('visually-hidden');\n  // loader.classList.remove('visually-hidden');\n  const queryParams = {\n    [getActiveFilterElem().dataset.exerciseFilter]:\n      exerciseListElem.dataset.groupName,\n    limit: isDesktopDevice ? 9 : 8,\n    page,\n  };\n\n  const keyword = inputElement.value.trim();\n  if (keyword) {\n    queryParams.keyword = keyword;\n  }\n\n  exercisesFilter.firstElementChild.textContent = capitalizeString(\n    exerciseListElem.dataset.groupName\n  );\n\n  const exercisesData = await backendAPI.getExercisesData(queryParams);\n  renderItems(exercisesData, true);\n  // loader.classList.add('visually-hidden');\n  exerciseListElem.classList.remove('visually-hidden');\n  paginationListElem.classList.remove('visually-hidden');\n}\n\nfunction renderItems(serverData = {}, isCards = false) {\n  // {\n  //   \"page\": \"1\",\n  //   \"perPage\": \"8\",\n  //   \"totalPages\": 2,\n  //   \"results\": [],\n  // }\n\n  const { results = [], totalPages = 1, page = 1 } = serverData;\n  if (results.length === 0) {\n    exerciseslistItemsEmptyMessage.classList.remove('visually-hidden');\n    exerciseListElem.classList.add('visually-hidden');\n    // paginationListElem.classList.add('visually-hidden');\n    exerciseListElem.innerHTML = results\n      .map(elem => renderAPI.filterGroupsMarkup(elem))\n      .join('');\n    paginationListElem.innerHTML = renderAPI.paginationMarkup();\n  } else {\n    exerciseslistItemsEmptyMessage.classList.add('visually-hidden');\n    exerciseListElem.classList.remove('visually-hidden');\n    // paginationListElem.classList.remove('visually-hidden');\n    const markup = isCards\n      ? results.map(elem => renderAPI.exerciseCardMarkup(elem)).join('')\n      : results.map(elem => renderAPI.filterGroupsMarkup(elem)).join('');\n\n    if (isCards) {\n      exercisesFilter.classList.remove('visually-hidden');\n    } else {\n      exercisesFilter.classList.add('visually-hidden');\n    }\n\n    exerciseListElem.innerHTML = markup;\n    paginationListElem.innerHTML = renderAPI.paginationMarkup(totalPages, page);\n  }\n}\n\nfunction exerciseListHandler(event) {\n  if (\n    event.target.nodeName === 'A' ||\n    event.target.nodeName === 'P' ||\n    event.target.nodeName === 'H3'\n  ) {\n    event.preventDefault();\n\n    const currentLink =\n      event.target.nodeName === 'A' ? event.target : event.target.closest('a');\n\n    exerciseListElem.dataset.isGroups = '';\n    exerciseListElem.dataset.groupName = currentLink.dataset.name;\n    renderExercises();\n\n    searchFormElem.classList.remove('visually-hidden');\n  } else if (exerciseListElem.dataset.groupName) {\n    const cardStartBtn = event.target.closest('.exercise-card-start-btn');\n    if (cardStartBtn) {\n      openModalExercise(cardStartBtn.getAttribute('data-open-id'));\n    }\n  }\n}\n\nfunction filterListHandler(event) {\n  if (event.target.nodeName === 'BUTTON') {\n    getActiveFilterElem().classList.toggle('exercises-type-item-active');\n    event.target.classList.toggle('exercises-type-item-active');\n    renderGroups();\n\n    searchFormElem.reset();\n    searchFormElem.classList.add('visually-hidden');\n  }\n}\n\nfunction paginationListHandler(event) {\n  if (event.target.nodeName === 'A') {\n    event.preventDefault();\n\n    const page = Number(event.target.innerText);\n\n    exerciseListElem.dataset.isGroups\n      ? renderGroups(page)\n      : renderExercises(page);\n  }\n}\n\nfunction getActiveFilterElem() {\n  return document.querySelector('.exercises-type-item-active');\n}\n\nfunction capitalizeString(string = '') {\n  return string[0].toUpperCase() + string.substring(1);\n}\n","import messages from './js/notificationAPI';\nimport backendAPI from './js/backendAPI';\nimport localStorageAPI from './js/localStorageAPI';\nimport startExercisesScenario from './js/excercises';\nimport makeAsyncRequest from './js/loader';\n\nimport './js/initialization';\n\nstartExercisesScenario();\n\n///////Subscription form/////////\nconst subscriptionForm = document.querySelector('.footer-subscription-form');\n\nsubscriptionForm.addEventListener('submit', async event => {\n  event.preventDefault();\n\n  const email = subscriptionForm.elements.email.value;\n\n  const response = await backendAPI.subscription(email);\n\n  if (response.result) {\n    messages.showSuccess(response.message);\n    subscriptionForm.elements.email.classList.remove('is-glowing');\n  } else {\n    messages.showError(response.message);\n  }\n\n  subscriptionForm.reset();\n});\n"],"names":["isMobileDevice","isDesktopDevice","filterListElem","exerciseListElem","paginationListElem","searchFormElem","inputElement","clearButton","exerciseslistItemsEmptyMessage","exercisesFilter","startExercisesScenario","filterListHandler","exerciseListHandler","paginationListHandler","searchFormSubmitHandler","inputElementHandler","clearButtonHandler","windowResizeHandler","renderGroups","isDeviceChange","renderExercises","event","inputValue","page","queryParams","getActiveFilterElem","filtersData","backendAPI","renderItems","keyword","capitalizeString","exercisesData","serverData","isCards","results","totalPages","elem","renderAPI","markup","currentLink","cardStartBtn","openModalExercise","string","subscriptionForm","email","response","messages"],"mappings":"uGAIA,IAAIA,EACAC,EAEJ,MAAMC,EAAiB,SAAS,cAAc,sBAAsB,EAC9DC,EAAmB,SAAS,cAAc,yBAAyB,EACnEC,EAAqB,SAAS,cAAc,kBAAkB,EAC9DC,EAAiB,SAAS,cAAc,sBAAsB,EAC9DC,EAAe,SAAS,cAAc,uBAAuB,EAC7DC,EAAc,SAAS,cAAc,2BAA2B,EAChEC,EAAiC,SAAS,cAC9C,0BACF,EACMC,EAAkB,SAAS,cAAc,+BAA+B,EAK/D,SAASC,GAAyB,CAC/CV,EAAiB,SAAS,gBAAgB,YAAc,IACxDC,EAAkB,SAAS,gBAAgB,aAAe,KAE1DC,EAAe,iBAAiB,QAASS,CAAiB,EAC1DR,EAAiB,iBAAiB,QAASS,CAAmB,EAC9DR,EAAmB,iBAAiB,QAASS,CAAqB,EAElER,EAAe,iBAAiB,SAAUS,CAAuB,EACjER,EAAa,iBAAiB,QAASS,CAAmB,EAC1DR,EAAY,iBAAiB,QAASS,CAAkB,EAExD,OAAO,iBAAiB,SAAUC,CAAmB,EAErDC,GACF,CAEA,SAASD,GAAsB,CAC7B,IAAIE,EAAiB,GACjBnB,IAAmB,SAAS,gBAAgB,YAAc,MAC5DmB,EAAiB,GACjBnB,EAAiB,CAACA,GAGhBC,IAAoB,SAAS,gBAAgB,aAAe,OAC9DkB,EAAiB,GACjBlB,EAAkB,CAACA,GAGjBkB,IACFhB,EAAiB,QAAQ,SAAWe,EAAc,EAAGE,EAAe,EAExE,CAEA,SAASN,EAAwBO,EAAO,CACtCA,EAAM,eAAc,EACpBD,GACF,CAEA,SAASL,GAAsB,CAC7B,MAAMO,EAAahB,EAAa,MAAM,KAAI,EAC1CC,EAAY,MAAM,QAAUe,EAAW,OAAS,EAAI,QAAU,MAChE,CAEA,SAASN,GAAqB,CAC5BX,EAAe,MAAK,EACpBE,EAAY,MAAM,QAAU,OAC5Ba,GACF,CAEA,eAAeF,EAAaK,EAAO,EAAG,CACpCpB,EAAiB,UAAU,IAAI,iBAAiB,EAChDC,EAAmB,UAAU,IAAI,iBAAiB,EAElDD,EAAiB,QAAQ,SAAW,OACpCA,EAAiB,QAAQ,UAAY,GAErC,MAAMqB,EAAc,CAClB,OAAQC,IAAsB,QAAQ,OACtC,MAAOzB,EAAiB,EAAI,GAC5B,KAAAuB,CACJ,EAEQG,EAAc,MAAMC,EAAW,cAAcH,CAAW,EAE9DrB,EAAiB,UAAU,OAAO,iBAAiB,EACnDC,EAAmB,UAAU,OAAO,iBAAiB,EACrDwB,EAAYF,CAAW,CACzB,CAEA,eAAeN,EAAgBG,EAAO,EAAG,CACvCpB,EAAiB,UAAU,IAAI,iBAAiB,EAChDC,EAAmB,UAAU,IAAI,iBAAiB,EAElD,MAAMoB,EAAc,CAClB,CAACC,EAAmB,EAAG,QAAQ,cAAc,EAC3CtB,EAAiB,QAAQ,UAC3B,MAAOF,EAAkB,EAAI,EAC7B,KAAAsB,CACJ,EAEQM,EAAUvB,EAAa,MAAM,KAAI,EACnCuB,IACFL,EAAY,QAAUK,GAGxBpB,EAAgB,kBAAkB,YAAcqB,EAC9C3B,EAAiB,QAAQ,SAC7B,EAEE,MAAM4B,EAAgB,MAAMJ,EAAW,iBAAiBH,CAAW,EACnEI,EAAYG,EAAe,EAAI,EAE/B5B,EAAiB,UAAU,OAAO,iBAAiB,EACnDC,EAAmB,UAAU,OAAO,iBAAiB,CACvD,CAEA,SAASwB,EAAYI,EAAa,GAAIC,EAAU,GAAO,CAQrD,KAAM,CAAE,QAAAC,EAAU,CAAA,EAAI,WAAAC,EAAa,EAAG,KAAAZ,EAAO,CAAG,EAAGS,EACnD,GAAIE,EAAQ,SAAW,EACrB1B,EAA+B,UAAU,OAAO,iBAAiB,EACjEL,EAAiB,UAAU,IAAI,iBAAiB,EAEhDA,EAAiB,UAAY+B,EAC1B,IAAIE,GAAQC,EAAU,mBAAmBD,CAAI,CAAC,EAC9C,KAAK,EAAE,EACVhC,EAAmB,UAAYiC,EAAU,uBACpC,CACL7B,EAA+B,UAAU,IAAI,iBAAiB,EAC9DL,EAAiB,UAAU,OAAO,iBAAiB,EAEnD,MAAMmC,EAASL,EACXC,EAAQ,IAAIE,GAAQC,EAAU,mBAAmBD,CAAI,CAAC,EAAE,KAAK,EAAE,EAC/DF,EAAQ,IAAIE,GAAQC,EAAU,mBAAmBD,CAAI,CAAC,EAAE,KAAK,EAAE,EAE/DH,EACFxB,EAAgB,UAAU,OAAO,iBAAiB,EAElDA,EAAgB,UAAU,IAAI,iBAAiB,EAGjDN,EAAiB,UAAYmC,EAC7BlC,EAAmB,UAAYiC,EAAU,iBAAiBF,EAAYZ,CAAI,CAC3E,CACH,CAEA,SAASX,EAAoBS,EAAO,CAClC,GACEA,EAAM,OAAO,WAAa,KAC1BA,EAAM,OAAO,WAAa,KAC1BA,EAAM,OAAO,WAAa,KAC1B,CACAA,EAAM,eAAc,EAEpB,MAAMkB,EACJlB,EAAM,OAAO,WAAa,IAAMA,EAAM,OAASA,EAAM,OAAO,QAAQ,GAAG,EAEzElB,EAAiB,QAAQ,SAAW,GACpCA,EAAiB,QAAQ,UAAYoC,EAAY,QAAQ,KACzDnB,IAEAf,EAAe,UAAU,OAAO,iBAAiB,CACrD,SAAaF,EAAiB,QAAQ,UAAW,CAC7C,MAAMqC,EAAenB,EAAM,OAAO,QAAQ,0BAA0B,EAChEmB,GACFC,EAAkBD,EAAa,aAAa,cAAc,CAAC,CAE9D,CACH,CAEA,SAAS7B,EAAkBU,EAAO,CAC5BA,EAAM,OAAO,WAAa,WAC5BI,IAAsB,UAAU,OAAO,4BAA4B,EACnEJ,EAAM,OAAO,UAAU,OAAO,4BAA4B,EAC1DH,IAEAb,EAAe,MAAK,EACpBA,EAAe,UAAU,IAAI,iBAAiB,EAElD,CAEA,SAASQ,EAAsBQ,EAAO,CACpC,GAAIA,EAAM,OAAO,WAAa,IAAK,CACjCA,EAAM,eAAc,EAEpB,MAAME,EAAO,OAAOF,EAAM,OAAO,SAAS,EAE1ClB,EAAiB,QAAQ,SACrBe,EAAaK,CAAI,EACjBH,EAAgBG,CAAI,CACzB,CACH,CAEA,SAASE,GAAsB,CAC7B,OAAO,SAAS,cAAc,6BAA6B,CAC7D,CAEA,SAASK,EAAiBY,EAAS,GAAI,CACrC,OAAOA,EAAO,CAAC,EAAE,YAAa,EAAGA,EAAO,UAAU,CAAC,CACrD,CCvMAhC,IAGA,MAAMiC,EAAmB,SAAS,cAAc,2BAA2B,EAE3EA,EAAiB,iBAAiB,SAAU,MAAMtB,GAAS,CACzDA,EAAM,eAAc,EAEpB,MAAMuB,EAAQD,EAAiB,SAAS,MAAM,MAExCE,EAAW,MAAMlB,EAAW,aAAaiB,CAAK,EAEhDC,EAAS,QACXC,EAAS,YAAYD,EAAS,OAAO,EACrCF,EAAiB,SAAS,MAAM,UAAU,OAAO,YAAY,GAE7DG,EAAS,UAAUD,EAAS,OAAO,EAGrCF,EAAiB,MAAK,CACxB,CAAC"}